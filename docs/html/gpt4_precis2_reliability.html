<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="author" content="Tim Woelfle" />

<meta name="date" content="2024-04-21" />


<title>PRECIS-2 in PragMeta: LLM (GPT-4) Intra-Rater Agreement</title>

<meta property="og:title" content="PRECIS-2 in PragMeta: LLM (GPT-4) Intra-Rater Agreement" />

<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />

<link rel="icon" href="data:image/x-icon;" type="image/x-icon">


<script type="text/javascript">
window.FlexDashboardComponents = [];
</script>

<script id="flexdashboard-navbar" type="application/json">
[{"title":"Home","href":"../index.html"},{"title":"Source Code","icon":"fa-github","href":"https://github.com/timwoelfle/Research-Assessment-AI/","align":"right"}]
</script>
<script src="lib/header-attrs-2.21/header-attrs.js"></script>
<script src="lib/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="lib/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="lib/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="lib/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="lib/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="lib/stickytableheaders-0.1.19/jquery.stickytableheaders.min.js"></script>
<link href="lib/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="lib/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />
<link href="lib/value-box-accent-static-0.6.1/theme-cosmo-value-box.css" rel="stylesheet" />
<link href="lib/flexdashboard-css-0.6.1/flexdashboard.min.css" rel="stylesheet" />
<link href="lib/flexdashboard-css-0.6.1/theme-cosmo.css" rel="stylesheet" />
<script src="lib/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="lib/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="lib/datatables-binding-0.28/datatables.js"></script>
<link href="lib/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="lib/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="lib/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="lib/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="lib/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<style type="text/css">
/*
  CSS for flexdashboard.js' use of Sly(). The sizing/position of this CSS needs to be
  applied _before_ flexdashboard.js initializes, which is why this CSS has been pulled
  out from flexdashboard.scss and inlined in the document's head.
*/

.storyboard-nav button {
  background: transparent;
  border: 0;
  opacity: .3;
  outline: none;
  padding: 0;
}

.storyboard-nav button:hover,
.storyboard-nav button:hover {
  opacity: .5;
}

.storyboard-nav button:disabled,
.storyboard-nav button:disabled {
  opacity: .1;
}

.storyboard-nav .sbnext,
.storyboard-nav .sbprev {
  float: left;
  width: 2%;
  height: 120px;
}

.storyboard-nav .sbprev {
  text-align: left;
  width: 2%;
}

.storyboard-nav .sbnext {
  float: right;
  text-align: right;
  margin-right: 8px;
}

.storyboard-nav .sbframelist {
  margin: 0 auto;
  width: 94%;
  height: 120px;
  overflow: hidden;
  text-shadow: none;
  margin-bottom: 8px;
}

.storyboard-nav .sbframelist ul {
  list-style: none;
  margin: 0;
  padding: 0;
  height: 100%;
}

.storyboard-nav .sbframelist ul li {
  float: left;
  width: 270px;
  height: 100%;
  padding: 10px 10px 10px 10px;
  margin-right: 8px;
  text-align: left;
  cursor: pointer;
}

.storyboard-nav .sbframelist ul li:last-child {
  margin-right: 0px;
}

.sbframe-commentary {
  width: 300px;
}

.sbframe-commentary ul {
  padding-left: 22px;
}

.sbframe.active {
  display: flex;
}

.sbframe:not(.active) {
  display: none;
}
@media only screen and (min-width: 768px) {
html, body {
  height: 100%;
}

#dashboard-container {
  height: 100%;
}
}
</style>



</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">

<span class="navbar-logo pull-left">
  
</span>
<span class="navbar-brand">
  PRECIS-2 in PragMeta: LLM (GPT-4) Intra-Rater Agreement
  <span class="navbar-author">
    Tim Woelfle &mdash; 2024-04-21
    </span>
</span>

<button id="navbar-button" type="button" class="navbar-toggle collapsed pull-right" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>

</div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav navbar-left">
</ul>
<ul class="nav navbar-nav navbar-right">
</ul>
</div><!--/.nav-collapse-->
</div><!--/.container-->
</div><!--/.navbar-->

<script type="text/javascript">


var FlexDashboard = (function () {

  // initialize options
  var _options = {};

  var FlexDashboard = function() {

    // default options
    _options = $.extend(_options, {
      theme: "cosmo",
      fillPage: false,
      orientation: 'columns',
      storyboard: false,
      defaultFigWidth: 576,
      defaultFigHeight: 461,
      defaultFigWidthMobile: 360,
      defaultFigHeightMobile: 461,
      isMobile: false,
      isPortrait: false,
      resize_reload: true
    });
  };

  function init(options) {

    // extend default options
    $.extend(true, _options, options);

    // add ids to sections that don't have them (pandoc won't assign ids
    // to e.g. sections with titles consisting of only chinese characters)
    var nextId = 1;
    $('.level1:not([id]),.level2:not([id]),.level3:not([id])').each(function() {
      $(this).attr('id', 'dashboard-' + nextId++);
    });

    // find navbar items
    var navbarItems = $('#flexdashboard-navbar');
    if (navbarItems.length)
      navbarItems = JSON.parse(navbarItems.html());
    addNavbarItems(navbarItems);

    // find the main dashboard container
    var dashboardContainer = $('#dashboard-container');

    // resolve mobile classes
    resolveMobileClasses(dashboardContainer);

    // one time global initialization for components
    componentsInit(dashboardContainer);

    // look for a global sidebar
    var globalSidebar = dashboardContainer.find(".section.level1.sidebar");
    if (globalSidebar.length > 0) {

      // global layout for fullscreen displays
      if (!isMobilePhone()) {

         // hoist it up to the top level
         globalSidebar.insertBefore(dashboardContainer);

         // lay it out (set width/positions)
         layoutSidebar(globalSidebar, dashboardContainer);

      // tuck sidebar into first page for mobile phones
      } else {

        // convert it into a level3 section
        globalSidebar.removeClass('sidebar');
        globalSidebar.removeClass('level1');
        globalSidebar.addClass('level3');
        var h1 = globalSidebar.children('h1');
        var h3 = $('<h3></h3>');
        h3.append(h1.contents());
        h3.insertBefore(h1);
        h1.detach();

        // move it into the first page
        var page = dashboardContainer.find('.section.level1').first();
        if (page.length > 0)
          page.prepend(globalSidebar);
      }
    }

    // look for pages to layout
    var pages = $('div.section.level1');
    if (pages.length > 0) {

        // find the navbar and collapse on clicked
        var navbar = $('#navbar');
        navbar.on("click", "a[data-toggle!=dropdown]", null, function () {
           navbar.collapse('hide');
        });

        // envelop the dashboard container in a tab content div
        dashboardContainer.wrapInner('<div class="tab-content"></div>');

        pages.each(function(index) {

          // lay it out
          layoutDashboardPage($(this));

          // add it to the navbar
          addToNavbar($(this), index === 0);

        });

    } else {

      // remove the navbar and navbar button if we don't
      // have any navbuttons
      if (navbarItems.length === 0) {
        $('#navbar').remove();
        $('#navbar-button').remove();
      }

      // add the storyboard class if requested
      if (_options.storyboard)
        dashboardContainer.addClass('storyboard');

      // layout the entire page
      layoutDashboardPage(dashboardContainer);
    }

    // if we are in shiny we need to trigger a window resize event to
    // force correct layout of shiny-bound-output elements
    if (isShinyDoc())
      $(window).trigger('resize');

    // make main components visible
    $('.section.sidebar').css('visibility', 'visible');
    dashboardContainer.css('visibility', 'visible');

    // handle location hash
    handleLocationHash();

    // intialize prism highlighting
    initPrismHighlighting();

    // record mobile and orientation state then register a handler
    // to refresh if resize_reload is set to true and it changes
    _options.isMobile = isMobilePhone();
    _options.isPortrait = isPortrait();
    if (_options.resize_reload) {
      $(window).on('resize', function() {
        if (_options.isMobile !== isMobilePhone() ||
            _options.isPortrait !== isPortrait()) {
          window.location.reload();
        }
      });
    } else {
      // if in desktop mode and resizing to mobile, make sure the heights are 100%
      // This enforces what `fillpage.css` does for "wider" pages.
      // Since we are not reloading once the page becomes small, we need to force the height to 100%
      // This is a new situation introduced when `_options.resize_reload` is `false`
      if (! _options.isMobile) {
        // only add if `fillpage.css` was added in the first place
        if (_options.fillPage) {
          // fillpage.css
          $("html,body,#dashboard").css("height", "100%");
        }
      }
    }
    // trigger layoutcomplete event
    dashboardContainer.trigger('flexdashboard:layoutcomplete');
  }

  function resolveMobileClasses(dashboardContainer) {
     // add top level layout class
    dashboardContainer.addClass(isMobilePhone() ? 'mobile-layout' :
                                                  'desktop-layout');

    // look for .mobile sections and add .no-mobile to their peers
    var mobileSections = $('.section.mobile');
    mobileSections.each(function() {
       var id = $(this).attr('id');
       var nomobileId = id.replace(/-\d+$/, '');
       $('#' + nomobileId).addClass('no-mobile');
    });
  }

  function addNavbarItems(navbarItems) {

    var navbarLeft = $('ul.navbar-left');
    var navbarRight = $('ul.navbar-right');

    for (var i = 0; i<navbarItems.length; i++) {

      // get the item
      var item = navbarItems[i];

      // determine the container
      var container = null;
      if (item.align === "left")
        container = navbarLeft;
      else
        container = navbarRight;

      // navbar menu if we have multiple items
      if (item.items) {
        var menu = navbarMenu(null, item.icon, item.title, container);
        for (var j = 0; j<item.items.length; j++) {
          var subItem = item.items[j];
          var li = $('<li></li>');
          var a = navbarLink(subItem.icon, subItem.title, subItem.href, subItem.target);
          a.removeClass("nav-link").addClass("dropdown-item");
          li.append(a);
          menu.append(li);
        }
      } else {
        var li = $('<li class="nav-item"></li>');
        li.append(navbarLink(item.icon, item.title, item.href, item.target));
        container.append(li);
      }
    }
  }

  // create or get a reference to an existing dropdown menu
  function navbarMenu(id, icon, title, container) {
    var existingMenu = [];
    if (id)
      existingMenu = container.children('#' + id);
    if (existingMenu.length > 0) {
      return existingMenu.children('ul');
    } else {
      var li = $('<li class="nav-item"></li>');
      if (id)
        li.attr('id', id);
      li.addClass('dropdown');
      // auto add "Share" title on mobile if necessary
      if (!title && icon && (icon === "fa-share-alt") && isMobilePhone())
        title = "Share";
      if (title) {
        title = title + ' <span class="caret"></span>';
      }
      var a = navbarLink(icon, title, "#");
      a.addClass('dropdown-toggle');
      a.attr('data-toggle', 'dropdown');
      a.attr('data-bs-toggle', 'dropdown');
      a.attr('role', 'button');
      a.attr('aria-expanded', 'false');
      li.append(a);
      var ul = $('<ul class="dropdown-menu"></ul>');
      ul.attr('role', 'menu');
      li.append(ul);
      container.append(li);
      return ul;
    }
  }

  function addToNavbar(page, active) {

    // capture the id and data-icon attribute (if any)
    var id = page.attr('id');
    var icon = page.attr('data-icon');
    var navmenu = page.attr('data-navmenu');

    // get hidden state (transfer this to navbar)
    var hidden = page.hasClass('hidden');
    page.removeClass('hidden');

    // sanitize the id for use with bootstrap tabs
    id = id.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_');
    page.attr('id', id);

    // get the wrapper
    var wrapper = page.closest('.dashboard-page-wrapper');

    // move the id to the wrapper
    page.removeAttr('id');
    wrapper.attr('id', id);

    // add the tab-pane class to the wrapper
    wrapper.addClass('tab-pane');
    if (active)
      wrapper.addClass('active');

    // get a reference to the h1, discover its inner contens, then detach it
    var h1 = wrapper.find('h1').first();
    var title = h1.contents();
    h1.detach();

    // create a navbar item
    var li = $('<li></li>');
    var a = navbarLink(icon, title, '#' + id);
    a.attr('data-toggle', 'tab');
    li.append(a);

    // add it to the navbar (or navbar menu if specified)
    var container = $('ul.navbar-left');
    if (navmenu) {
      var menuId = navmenu.replace(/\s+/g, '');
      var menu = navbarMenu(menuId, null, navmenu, container);
      li.find("> a").removeClass("nav-link").addClass("dropdown-item");
      menu.append(li);
    } else {
      li.addClass("nav-item")
      container.append(li);
    }

    // hide it if requested
    if (hidden)
      li.addClass('hidden');
  }

  function navbarLink(icon, title, href, target) {

    var a = $('<a class="nav-link"></a>');
    if (icon) {

      // get the name of the icon set and icon
      var dashPos = icon.indexOf("-");
      var iconSet = null;
      var iconSplit = icon.split(" ");
      if (iconSplit.length > 1) {
        iconSet = iconSplit[0];
        icon = iconSplit.slice(1).join(" ");
      } else {
        iconSet = icon.substring(0, dashPos);
      }
      var iconName = icon.substring(dashPos + 1);

      // create the icon
      var iconElement = $('<span class="' + iconSet + ' ' + icon + '"></span>');
      if (title)
        iconElement.css('margin-right', '7px');
      a.append(iconElement);
      // if href is null see if we can auto-generate based on icon (e.g. social)
      if (!href)
        maybeGenerateLinkFromIcon(iconName, a);
    }
    if (title)
      a.append(title);

    // add the href.
    if (href) {
      if (href === "source_embed") {
        a.attr('href', '#');
        a.attr('data-featherlight', "#flexdashboard-source-code");
        a.featherlight({
            beforeOpen: function(event){
              $('body').addClass('unselectable');
            },
            afterClose: function(event){
              $('body').removeClass('unselectable');
            }
        });
      } else {
        a.attr('href', href);
      }
    }

    // add the arget
    if (target)
      a.attr('target', target);

    return a;
  }

  // auto generate a link from an icon name (e.g. twitter) when possible
  function maybeGenerateLinkFromIcon(iconName, a) {

     var serviceLinks = {
      "twitter": "https://twitter.com/share?text=" + encodeURIComponent(document.title) + "&url="+encodeURIComponent(location.href),
      "facebook": "https://www.facebook.com/sharer/sharer.php?s=100&p[url]="+encodeURIComponent(location.href),
      "linkedin": "https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(location.href) + "&title=" + encodeURIComponent(document.title),
      "pinterest": "https://pinterest.com/pin/create/link/?url="+encodeURIComponent(location.href) + "&description=" + encodeURIComponent(document.title)
    };

    var makeSocialLink = function(a, href) {
      a.attr('href', '#');
      a.on('click', function(e) {
        e.preventDefault();
        window.open(href);
      });
    };

    $.each(serviceLinks, function(key, value) {
      if (iconName.indexOf(key) !== -1)
        makeSocialLink(a, value);
    });
  }

  // layout a dashboard page
  function layoutDashboardPage(page) {

    // use a page wrapper so that free form content above the
    // dashboard appears at the top rather than the side (as it
    // would without the wrapper in a column orientation)
    var wrapper = $('<div class="dashboard-page-wrapper"></div>');
    page.wrap(wrapper);

    // if there are no level2 or level3 headers synthesize a level3
    // header to contain the (e.g. frame it, scroll container, etc.)
    var headers = page.find('h2,h3');
    if (headers.length === 0)
      page.wrapInner('<div class="section level3"></div>');

    // hoist up any content before level 2 or level 3 headers
    var children = page.children();
    children.each(function(index) {
      if ($(this).hasClass('level2') || $(this).hasClass('level3'))
        return false;
      $(this).insertBefore(page);
    });

    // determine orientation and fillPage behavior for distinct media
    var orientation, fillPage, storyboard;

    // media: mobile phone
    if (isMobilePhone()) {

      // if there is a sidebar we need to ensure it's content
      // is properly framed as an h3
      var sidebar = page.find('.section.sidebar');
      sidebar.removeClass('sidebar');
      sidebar.wrapInner('<div class="section level3"></div>');
      var h2 = sidebar.find('h2');
      var h3 = $('<h3></h3>');
      h3.append(h2.contents());
      h3.insertBefore(h2);
      h2.detach();

      // wipeout h2 elements then enclose them in a single h2
      var level2 = page.find('div.section.level2');
      level2.each(function() {
        level2.children('h2').remove();
        level2.children().unwrap();
      });
      page.wrapInner('<div class="section level2"></div>');

      // substitute mobile images
      if (isPortrait()) {
        var mobileFigures = $('img.mobile-figure');
        mobileFigures.each(function() {
          // get the src (might be base64 encoded)
          var src = $(this).attr('src');

          // find it's peer
          var id = $(this).attr('data-mobile-figure-id');
          var img = $('img[data-figure-id=' + id + "]");
          img.attr('src', src)
             .attr('width', _options.defaultFigWidthMobile)
             .attr('height', _options.defaultFigHeightMobile);
        });
      }

      // hoist storyboard commentary into it's own section
      if (page.hasClass('storyboard')) {
        var commentaryHR = page.find('div.section.level3 hr');
        commentaryHR.each(function() {
          var commentary = $(this).nextAll().detach();
          var commentarySection = $('<div class="section level3"></div>');
          commentarySection.append(commentary);
          commentarySection.insertAfter($(this).closest('div.section.level3'));
          $(this).remove();
        });
      }

      // force a non full screen layout by columns
      orientation = _options.orientation = 'columns';
      fillPage = _options.fillPage = false;
      storyboard = _options.storyboard = false;

    // media: desktop
    } else {

      // determine orientation
      orientation = page.attr('data-orientation');
      if (orientation !== 'rows' && orientation != 'columns')
        orientation = _options.orientation;

      // determine storyboard mode
      storyboard = page.hasClass('storyboard');

      // fillPage based on options (force for storyboard)
      fillPage = _options.fillPage || storyboard;

      // handle sidebar
      var sidebar = page.find('.section.level2.sidebar');
      if (sidebar.length > 0)
        layoutSidebar(sidebar, page);
    }

    // give it and it's parent divs height: 100% if we are in fillPage mode
    if (fillPage) {
      page.addClass('vertical-layout-fill');
      page.css('height', '100%');
      page.parents('div').css('height', '100%');
    } else {
      page.addClass('vertical-layout-scroll');
    }

    // perform the layout
    if (storyboard)
      layoutPageAsStoryboard(page);
    else if (orientation === 'rows')
      layoutPageByRows(page, fillPage);
    else if (orientation === 'columns')
      layoutPageByColumns(page, fillPage);
  }

  function layoutSidebar(sidebar, content) {

    // get it out of the header hierarchy
    sidebar = sidebar.first();
    if (sidebar.hasClass('level1')) {
      sidebar.removeClass('level1');
      sidebar.children('h1').remove();
    } else if (sidebar.hasClass('level2')) {
      sidebar.removeClass('level2');
      sidebar.children('h2').remove();
    }

    // determine width
    var sidebarWidth = isTablet() ? 220 : 250;
    var dataWidth = parseInt(sidebar.attr('data-width'));
    if (dataWidth)
      sidebarWidth = dataWidth;

    // set the width and shift the page right to accomodate the sidebar
    sidebar.css('width', sidebarWidth + 'px');
    content.css('padding-left', sidebarWidth + 'px');

    // wrap it's contents in a form
    sidebar.wrapInner($('<form></form>'));
  }

  function layoutPageAsStoryboard(page) {

    // create storyboard navigation
    var nav = $('<div class="storyboard-nav"></div>');

    // add navigation buttons
    var prev = $('<button class="sbprev"><i class="fa fa-angle-left"></i></button>');
    nav.append(prev);
    var next= $('<button class="sbnext"><i class="fa fa-angle-right"></i></button>');
    nav.append(next);

    // add navigation frame
    var frameList = $('<div class="sbframelist"></div>');
    nav.append(frameList);
    var ul = $('<ul></ul>');
    frameList.append(ul);

     // find all the level3 sections (those are the storyboard frames)
    var frames = page.find('div.section.level3');
    frames.each(function() {

      // mark it
      $(this).addClass('sbframe');

      // divide it into chart content and (optional) commentary
      $(this).addClass('dashboard-column-orientation');

      // stuff the chart into it's own div w/ flex
      $(this).wrapInner('<div class="sbframe-component"></div>');
      setFlex($(this), 1);
      var frame = $(this).children('.sbframe-component');

      // extract the title from the h3
      var li = $('<li></li>');
      var h3 = frame.children('h3');
      li.append(h3.contents());
      h3.detach();
      ul.append(li);

      // extract commentary
      var hr = frame.children('hr');
      if (hr.length) {
        var commentary = hr.nextAll().detach();
        hr.remove();
        var commentaryFrame = $('<div class="sbframe-commentary"></div>');
        commentaryFrame.addClass('flowing-content-shim');
        commentaryFrame.addClass('flowing-content-container');
        commentaryFrame.append(commentary);
        $(this).append(commentaryFrame);

        // look for a data-commentary-width attribute
        var commentaryWidth = $(this).attr('data-commentary-width');
        if (commentaryWidth)
          commentaryFrame.css('width', commentaryWidth + 'px');
      }

      // layout the chart (force flex)
      var result = layoutChart(frame, true);

      // ice the notes if there are none
      if (!result.notes)
        frame.find('.chart-notes').remove();

      // set flex on chart
      setFlex(frame, 1);
    });

    // create a div to hold all the frames
    var frameContent = $('<div class="sbframe-content"></div>');
    frameContent.addClass('dashboard-row-orientation');
    frameContent.append(frames.detach());

    // row orientation to stack nav and frame content
    page.addClass('dashboard-row-orientation');
    page.append(nav);
    page.append(frameContent);
    setFlex(frameContent, 1);

    // initialize sly
    var sly = new Sly(frameList, {
    		horizontal: true,
    		itemNav: 'basic',
    		smart: true,
    		activateOn: 'click',
    		startAt: 0,
    		scrollBy: 1,
    		activatePageOn: 'click',
    		speed: 200,
    		moveBy: 600,
    		dragHandle: true,
    		dynamicHandle: true,
    		clickBar: true,
    		keyboardNavBy: 'items',
    		next: next,
    		prev: prev
    	}).init();

    // make first frame active
    frames.removeClass('active');
    frames.first().addClass('active');

    // subscribe to frame changed events
    sly.on('active', function (eventName, itemIndex) {
      frames.removeClass('active');
      frames.eq(itemIndex).addClass('active')
                          .trigger('shown');
    });
  }

  function layoutPageByRows(page, fillPage) {

    // row orientation
    page.addClass('dashboard-row-orientation');

    // find all the level2 sections (those are the rows)
    var rows = page.find('div.section.level2');

    // if there are no level2 sections then treat the
    // entire page as if it's a level 2 section
    if (rows.length === 0) {
      page.wrapInner('<div class="section level2"></div>');
      rows = page.find('div.section.level2');
    }

    rows.each(function () {

      // flags
      var haveNotes = false;
      var haveFlexHeight = true;

      // remove the h2
      $(this).children('h2').remove();

      // check for a tabset
      var isTabset = $(this).hasClass('tabset');
      if (isTabset)
        layoutTabset($(this));

      // give it row layout semantics if it's not a tabset
      if (!isTabset)
        $(this).addClass('dashboard-row');

      // find all of the level 3 subheads
      var columns = $(this).find('div.section.level3');

      // determine figureSizes sizes
      var figureSizes = chartFigureSizes(columns);

      // fixup the columns
      columns.each(function(index) {

        // layout the chart (force flex if we are in a tabset)
        var result = layoutChart($(this), isTabset);

        // update flexHeight state
        if (!result.flex)
          haveFlexHeight = false;

        // update state
        if (result.notes)
          haveNotes = true;

        // set the column flex based on the figure width
        // (value boxes will just get the default figure width)
        var chartWidth = figureSizes[index].width;
        setFlex($(this), chartWidth + ' ' + chartWidth + ' 0px');

      });

      // remove empty chart note divs
      if (isTabset)
        $(this).find('.chart-notes').filter(function() {
            return $(this).html() === "&nbsp;";
        }).remove();
      if (!haveNotes)
        $(this).find('.chart-notes').remove();

       // make it a flexbox row
      if (haveFlexHeight)
        $(this).addClass('dashboard-row-flex');

      // now we can set the height on all the wrappers (based on maximum
      // figure height + room for title and notes, or data-height on the
      // container if specified). However, don't do this if there is
      // no flex on any of the constituent columns
      var flexHeight = null;
      var dataHeight = parseInt($(this).attr('data-height'));
      if (dataHeight)
        flexHeight = adjustedHeight(dataHeight, columns.first());
      else if (haveFlexHeight)
        flexHeight = maxChartHeight(figureSizes, columns);
      if (flexHeight) {
        if (fillPage)
          setFlex($(this), flexHeight + ' ' + flexHeight + ' 0px');
        else {
          $(this).css('height', flexHeight + 'px');
          setFlex($(this), '0 0 ' + flexHeight + 'px');
        }
      }

    });
  }

  function layoutPageByColumns(page, fillPage) {

    // column orientation
    page.addClass('dashboard-column-orientation');

    // find all the level2 sections (those are the columns)
    var columns = page.find('div.section.level2');

    // if there are no level2 sections then treat the
    // entire page as if it's a level 2 section
    if (columns.length === 0) {
      page.wrapInner('<div class="section level2"></div>');
      columns = page.find('div.section.level2');
    }

    // layout each column
    columns.each(function (index) {

      // remove the h2
      $(this).children('h2').remove();

      // make it a flexbox column
      $(this).addClass('dashboard-column');

      // check for a tabset
      var isTabset = $(this).hasClass('tabset');
      if (isTabset)
        layoutTabset($(this));

      // find all the h3 elements
      var rows = $(this).find('div.section.level3');

      // get the figure sizes for the rows
      var figureSizes = chartFigureSizes(rows);

      // column flex is the max row width (or data-width if specified)
      var flexWidth;
      var dataWidth = parseInt($(this).attr('data-width'));
      if (dataWidth)
        flexWidth = dataWidth;
      else
        flexWidth = maxChartWidth(figureSizes);
      setFlex($(this), flexWidth + ' ' + flexWidth + ' 0px');

      // layout each chart
      rows.each(function(index) {

        // perform the layout
        var result = layoutChart($(this), false);

        // ice the notes if there are none
        if (!result.notes)
          $(this).find('.chart-notes').remove();

        // set flex height based on figHeight, then adjust
        if (result.flex) {
          var chartHeight = figureSizes[index].height;
          chartHeight = adjustedHeight(chartHeight, $(this));
          if (fillPage)
            setFlex($(this), chartHeight + ' ' + chartHeight + ' 0px');
          else {
            $(this).css('height', chartHeight + 'px');
            setFlex($(this), chartHeight + ' ' + chartHeight + ' ' + chartHeight + 'px');
          }
        }
      });
    });
  }

  function chartFigureSizes(charts) {

    // sizes
    var figureSizes = new Array(charts.length);

    // check each chart
    charts.each(function(index) {

      // start with default
      figureSizes[index] = {
        width: _options.defaultFigWidth,
        height: _options.defaultFigHeight
      };

      // look for data-height or data-width then knit options
      var dataWidth = parseInt($(this).attr('data-width'));
      var dataHeight = parseInt($(this).attr('data-height'));
      var knitrOptions = $(this).find('.knitr-options:first');
      var knitrWidth, knitrHeight;
      if (knitrOptions) {
        knitrWidth = parseInt(knitrOptions.attr('data-fig-width'));
        knitrHeight =  parseInt(knitrOptions.attr('data-fig-height'));
      }

      // width
      if (dataWidth)
        figureSizes[index].width = dataWidth;
      else if (knitrWidth)
        figureSizes[index].width = knitrWidth;

      // height
      if (dataHeight)
        figureSizes[index].height = dataHeight;
      else if (knitrHeight)
        figureSizes[index].height = knitrHeight;
    });

    // return sizes
    return figureSizes;
  }

  function maxChartHeight(figureSizes, charts) {

    // first compute the maximum height
    var maxHeight = _options.defaultFigHeight;
    for (var i = 0; i<figureSizes.length; i++)
      if (figureSizes[i].height > maxHeight)
        maxHeight = figureSizes[i].height;

    // now add offests for chart title and chart notes
    if (charts.length)
      maxHeight = adjustedHeight(maxHeight, charts.first());

    return maxHeight;
  }

  function adjustedHeight(height, chart) {
    if (chart.length > 0) {
      var chartTitle = chart.find('.chart-title');
      if (chartTitle.length)
        height += chartTitle.first().outerHeight();
      var chartNotes = chart.find('.chart-notes');
      if (chartNotes.length)
        height += chartNotes.first().outerHeight();
    }
    return height;
  }

  function maxChartWidth(figureSizes) {
    var maxWidth = _options.defaultFigWidth;
    for (var i = 0; i<figureSizes.length; i++)
      if (figureSizes[i].width > maxWidth)
        maxWidth = figureSizes[i].width;
    return maxWidth;
  }

  // layout a chart
  function layoutChart(chart, forceFlex) {

    // state to return
    var result = {
      notes: false,
      flex: false
    };

    // extract the title
    var title = extractTitle(chart);

    // find components that apply to this container
    var components = componentsFind(chart);

    // if it's a custom component then call it and return
    var customComponents = componentsCustom(components);
    if (customComponents.length) {
      componentsLayout(customComponents, title, chart);
      result.notes = false;
      result.flex = forceFlex || componentsFlex(customComponents);
      return result;
    }

    // put all the content in a chart wrapper div
    chart.addClass('chart-wrapper');
    chart.wrapInner('<div class="chart-stage"></div>');
    var chartContent = chart.children('.chart-stage');

    // flex the content if appropriate
    result.flex = forceFlex || componentsFlex(components);
    if (result.flex) {
      // add flex classes
      chart.addClass('chart-wrapper-flex');
      chartContent.addClass('chart-stage-flex');

      // additional shim to break out of flexbox sizing
      chartContent.wrapInner('<div class="chart-shim"></div>');
      chartContent = chartContent.children('.chart-shim');
    }

    // set custom data-padding attribute
    var pad = chart.attr('data-padding');
    if (pad) {
      if (pad === "0")
        chart.addClass('no-padding');
      else {
        pad = pad + 'px';
        chartContent.css('left', pad)
                    .css('top', pad)
                    .css('right', pad)
                    .css('bottom', pad)
      }
    }

    // call compoents
    componentsLayout(components, title, chartContent);

    // also activate components on shiny output
    findShinyOutput(chartContent).on('shiny:value',
      function(event) {
        var element = $(event.target);
        setTimeout(function() {

          // see if we opted out of flex based on our output (for shiny
          // we can't tell what type of output we have until after the
          // value is bound)
          var components = componentsFind(element);
          var flex = forceFlex || componentsFlex(components);
          if (!flex) {
            chart.css('height', "");
            setFlex(chart, "");
            chart.removeClass('chart-wrapper-flex');
            chartContent.removeClass('chart-stage-flex');
            chartContent.children().unwrap();
          }

          // perform layout
          componentsLayout(components, title, element.parent());
        }, 10);
      });

    // add the title
    var chartTitle = $('<div class="chart-title"></div>');
    chartTitle.append(title);
    chart.prepend(chartTitle);

    // add the notes section
    var chartNotes = $('<div class="chart-notes"></div>');
    chartNotes.html('&nbsp;');
    chart.append(chartNotes);

    // attempt to extract notes if we have a component
    if (components.length)
      result.notes = extractChartNotes(chartContent, chartNotes);

    // return result
    return result;
  }

  // build a tabset from a section div with the .tabset class
  function layoutTabset(tabset) {

    // check for fade option
    var fade = tabset.hasClass("tabset-fade");
    var pills = tabset.hasClass("tabset-pills");
    var navClass = pills ? "nav-pills" : "nav-tabs";

    // determine the heading level of the tabset and tabs
    var match = tabset.attr('class').match(/level(\d) /);
    if (match === null)
      return;
    var tabsetLevel = Number(match[1]);
    var tabLevel = tabsetLevel + 1;

    // find all subheadings immediately below
    var tabs = tabset.find("div.section.level" + tabLevel);
    if (!tabs.length)
      return;

    // create tablist and tab-content elements
    var tabList = $('<ul class="nav ' + navClass + '" role="tablist"></ul>');
    $(tabs[0]).before(tabList);
    var tabContent = $('<div class="tab-content"></div>');
    $(tabs[0]).before(tabContent);

    // build the tabset
    var activeTab = 0;
    tabs.each(function(i) {

      // get the tab div
      var tab = $(tabs[i]);

      // get the id then sanitize it for use with bootstrap tabs
      var id = tab.attr('id');

      // see if this is marked as the active tab
      if (tab.hasClass('active'))
        activeTab = i;

      // sanitize the id for use with bootstrap tabs
      id = id.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_');
      tab.attr('id', id);

      // get the heading element within it and grab it's text
      var heading = tab.find('h' + tabLevel + ':first');
      var headingDom = heading.contents();

      // build and append the tab list item
      var a = $('<a role="tab" data-toggle="tab" class="nav-link"></a>');
      a.append(headingDom);
      a.attr('href', '#' + id);
      a.attr('aria-controls', id);
      var li = $('<li role="presentation" class="nav-item"></li>');
      li.append(a);
      tabList.append(li);

      // set it's attributes
      tab.attr('role', 'tabpanel');
      tab.addClass('tab-pane');
      tab.addClass('tabbed-pane');
      tab.addClass('no-title');
      if (fade)
        tab.addClass('fade');

      // move it into the tab content div
      tab.detach().appendTo(tabContent);
    });

    // set active tab
    $(tabList.children()[activeTab]).tab("show");
    var active = $(tabContent.children('div.section')[activeTab]);
    active.addClass('active');
    if (fade)
      active.addClass('in');

    // add nav-tabs-custom
    tabset.addClass('nav-tabs-custom');

    // internal layout is dashboard-column with tab-content flexing
    tabset.addClass('dashboard-column');
    setFlex(tabContent, 1);
  }

  // one time global initialization for components
  function componentsInit(dashboardContainer) {
    for (var i=0; i<window.FlexDashboardComponents.length; i++) {
      var component = window.FlexDashboardComponents[i];
      if (component.init)
        component.init(dashboardContainer);
    }
  }

  // find components that apply within a container
  function componentsFind(container) {

    // look for components
    var components = [];
    for (var i=0; i<window.FlexDashboardComponents.length; i++) {
      var component = window.FlexDashboardComponents[i];
      if (component.find(container).length)
        components.push(component);
    }

    // if there were none then use a special flowing content component
    // that just adds a scrollbar in fillPage mode
    if (components.length == 0) {
      components.push({
        find: function(container) {
          return container;
        },

        flex: function(fillPage) {
          return fillPage;
        },

        layout: function(title, container, element, fillPage) {
          if (fillPage) {
            container.addClass('flowing-content-shim');
            container.addClass('flowing-content-container');
          }
        }
      });
    }

    return components;
  }

  // if there is a custom component then pick it out
  function componentsCustom(components) {
    var customComponent = [];
    for (var i=0; i<components.length; i++)
      if (components[i].type === "custom") {
        customComponent.push(components[i]);
        break;
      }
    return customComponent;
  }

  // query all components for flex
  function componentsFlex(components) {

    // no components at all means no flex
    if (components.length === 0)
      return false;

    // otherwise query components (assume true unless we see false)
    var isMobile = isMobilePhone();
    for (var i=0; i<components.length; i++)
      if (components[i].flex && !components[i].flex(_options.fillPage))
        return false;
    return true;
  }

  // layout all components
  function componentsLayout(components, title, container) {
    var isMobile = isMobilePhone();
    for (var i=0; i<components.length; i++) {
      var element = components[i].find(container);
      if (components[i].layout) {
        // call layout (don't call other components if it returns false)
        var result = components[i].layout(title, container, element, _options.fillPage);
        if (result === false)
          return;
      }
    }
  }

  // get a reference to the h3, discover it's inner html, and remove it
  function extractTitle(container) {
    var h3 = container.children('h3').first();
    var title = '';
    if (!container.hasClass('no-title'))
      title = h3.contents();
    h3.detach();
    return title;
  }

  // extract chart notes
  function extractChartNotes(chartContent, chartNotes) {
    // look for a terminating blockquote or image caption
    var blockquote = chartContent.children('blockquote:last-child');
    var caption = chartContent.children('div.image-container')
                              .children('p.caption');
    if (blockquote.length) {
      chartNotes.empty().append(blockquote.children('p:first-child').contents());
      blockquote.remove();
      return true;
    } else if (caption.length) {
      chartNotes.empty().append(caption.contents());
      caption.remove();
      return true;
    } else {
      return false;
    }
  }

  function findShinyOutput(chartContent) {
    return chartContent.find('.shiny-text-output, .shiny-html-output');
  }

  // safely detect rendering on a mobile phone
  function isMobilePhone() {
    try
    {
      return ! window.matchMedia("only screen and (min-width: 768px)").matches;
    }
    catch(e) {
      return false;
    }
  }

  function isFillPage() {
    return _options.fillPage;
  }

  // detect portrait mode
  function isPortrait() {
    return ($(window).width() < $(window).height());
  }

  // safely detect rendering on a tablet
  function isTablet() {
    try
    {
      return window.matchMedia("only screen and (min-width: 769px) and (max-width: 992px)").matches;
    }
    catch(e) {
      return false;
    }
  }

  // test whether this is a shiny doc
  function isShinyDoc() {
    return (typeof(window.Shiny) !== "undefined" && !!window.Shiny.outputBindings);
  }

  // set flex using vendor specific prefixes
  function setFlex(el, flex) {
    el.css('-webkit-box-flex', flex)
      .css('-webkit-flex', flex)
      .css('-ms-flex', flex)
      .css('flex', flex);
  }

  // support bookmarking of pages
  function handleLocationHash() {

    // restore tab/page from bookmark
    var hash = window.decodeURIComponent(window.location.hash);
    if (hash.length > 0)
      $('ul.nav a[href="' + hash + '"]').tab('show');
    FlexDashboardUtils.manageActiveNavbarMenu();

    // navigate to a tab when the history changes
    window.addEventListener("popstate", function(e) {
      var hash = window.decodeURIComponent(window.location.hash);
      var activeTab = $('ul.nav a[href="' + hash + '"]');
      if (activeTab.length) {
        activeTab.tab('show');
      } else {
        $('ul.nav a:first').tab('show');
      }
      FlexDashboardUtils.manageActiveNavbarMenu();
    });

    // add a hash to the URL when the user clicks on a tab/page
    $('.navbar-nav a[data-toggle="tab"]').on('click', function(e) {
      var baseUrl = FlexDashboardUtils.urlWithoutHash(window.location.href);
      var hash = FlexDashboardUtils.urlHash($(this).attr('href'));
      var href = baseUrl + hash;
      FlexDashboardUtils.setLocation(href);
    });

    // handle clicks of other links that should activate pages
    var navPages = $('ul.navbar-nav li a[data-toggle=tab]');
    navPages.each(function() {
      var href =  $(this).attr('href');
      var links = $('a[href="' + href + '"][data-toggle!=tab]');
      links.each(function() {
        $(this).on('click', function(e) {
          window.FlexDashboardUtils.showPage(href);
        });
      });
    });
  }

  // tweak Prism highlighting
  function initPrismHighlighting() {

    if (window.Prism) {
      Prism.languages.insertBefore('r', 'comment', {
        'heading': [
          {
            // title 1
        	  // =======

        	  // title 2
        	  // -------
        	  pattern: /\w+.*(?:\r?\n|\r)(?:====+|----+)/,
            alias: 'operator'
          },
          {
            // ### title 3
            pattern: /(^\s*)###[^#].+/m,
            lookbehind: true,
            alias: 'operator'
          }
        ]
      });

      // prism highlight
      Prism.highlightAll();
    }
  }

  FlexDashboard.prototype = {
    constructor: FlexDashboard,
    init: init,
    isMobilePhone: isMobilePhone,
    isFillPage: isFillPage
  };

  return FlexDashboard;

})();

// utils
window.FlexDashboardUtils = {
  resizableImage: function(img) {
    var src = img.attr('src');
    var url = 'url("' + src + '")';
    img.parent().css('background', url)
                .css('background-size', 'contain')
                .css('background-repeat', 'no-repeat')
                .css('background-position', 'center')
                .addClass('image-container');
  },
  setLocation: function(href) {
    if (history && history.pushState) {
      history.pushState(null, null, href);
    } else {
      window.location.replace(href);
    }
    setTimeout(function() {
        window.scrollTo(0, 0);
    }, 10);
    this.manageActiveNavbarMenu();
  },
  showPage: function(href) {
    $('ul.navbar-nav li a[href="' + href + '"]').tab('show');
    var baseUrl = this.urlWithoutHash(window.location.href);
    var loc = baseUrl + href;
    this.setLocation(loc);
  },
  showLinkedValue: function(href) {
    // check for a page link
    if ($('ul.navbar-nav li a[data-toggle=tab][href="' + href + '"]').length > 0)
      this.showPage(href);
    else
      window.open(href);
  },
  urlWithoutHash: function(url) {
    var hashLoc = url.indexOf('#');
    if (hashLoc != -1)
      return url.substring(0, hashLoc);
    else
      return url;
  },
  urlHash: function(url) {
    var hashLoc = url.indexOf('#');
    if (hashLoc != -1)
      return url.substring(hashLoc);
    else
      return "";
  },
  manageActiveNavbarMenu: function () {
    // remove active from currently active tabs
    $('.navbar ul.nav .active').removeClass('active');
    // find the active tab
    var activeTab = $('.dashboard-page-wrapper.tab-pane.active');
    if (activeTab.length > 0) {
      var tabId = activeTab.attr('id');
      if (tabId)
        $(".navbar ul.nav a[href='#" + tabId + "']").tab("show");
    }
  }
};

window.FlexDashboard = new FlexDashboard();

// empty content
window.FlexDashboardComponents.push({
  find: function(container) {
    if (container.find('p').length == 0)
      return container;
    else
      return $();
  }
})

// plot image
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.children('p')
                    .children('img:only-child');
  },

  layout: function(title, container, element, fillPage) {
    FlexDashboardUtils.resizableImage(element);
  }
});

// plot image (figure style)
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.children('div.figure').children('img');
  },

  layout: function(title, container, element, fillPage) {
    FlexDashboardUtils.resizableImage(element);
  }
});

// htmlwidget
window.FlexDashboardComponents.push({

  init: function(dashboardContainer) {
    // trigger "shown" after initial layout to force static htmlwidgets
    // in runtime: shiny to be resized after the dom has been transformed
    dashboardContainer.on('flexdashboard:layoutcomplete', function(event) {
      setTimeout(function() {
        dashboardContainer.trigger('shown');
      }, 200);
    });
  },

  find: function(container) {
    return container.children('div[id^="htmlwidget-"],div.html-widget');
  }
});

// gauge
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.children('div.html-widget.gauge');
  },

  flex: function(fillPage) {
    return false;
  },

  layout: function(title, container, element, fillPage) {


  }

});

// shiny output
window.FlexDashboardComponents.push({
  find: function(container) {
    return container.children('div[class^="shiny-"]');
  }
});

// bootstrap table
window.FlexDashboardComponents.push({

  find: function(container) {
    var bsTable = container.find('table.table');
    if (bsTable.length !== 0)
      return bsTable;
    else
      return container.find('tr.header').parent('thead').parent('table');
  },

  flex: function(fillPage) {
    return fillPage;
  },

  layout: function(title, container, element, fillPage) {

    // alias variables
    var bsTable = element;

    // fixup xtable generated tables with a proper thead
    var headerRow = bsTable.find('tbody > tr:first-child > th').parent();
    if (headerRow.length > 0) {
      var thead = $('<thead></thead>');
      bsTable.prepend(thead);
      headerRow.detach().appendTo(thead);
    }

    // improve appearance
    container.addClass('bootstrap-table');

    // for fill page provide scrolling w/ sticky headers
    if (fillPage) {
      // force scrollbar on overflow
      container.addClass('flowing-content-shim');

      // stable table headers when scrolling
      bsTable.stickyTableHeaders({
        scrollableArea: container
      });
    }
  }
});

// embedded shiny app
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.find('iframe.shiny-frame');
  },

  flex: function(fillPage) {
    return fillPage;
  },

  layout: function(title, container, element, fillPage) {
    if (fillPage) {
      element.attr('height', '100%');
    } else {
      // provide default height if necessary
      var height = element.get(0).style.height;
      if (!height)
        height = element.attr('height');
      if (!height)
        element.attr('height', 500);
    }
  }
});

// shiny fillRow or fillCol
window.FlexDashboardComponents.push({

  find: function(container) {
    return container.find('.flexfill-container');
  },

  flex: function(fillPage) {
    return fillPage;
  },

  layout: function(title, container, element, fillPage) {
    if (fillPage)
      element.css('height', '100%');
    else {
      // provide default height if necessary
      var height = element.get(0).style.height;
      if (height === "100%" || height === "auto" || height === "initial" ||
          height === "inherit" || !height) {
        element.css('height', 500);
      }
    }
  }
});

// valueBox
window.FlexDashboardComponents.push({

  type: "custom",

  find: function(container) {
    if (container.find('span.value-output, .shiny-valuebox-output').length)
      return container;
    else
      return $();
  },

  flex: function(fillPage) {
    return false;
  },

  layout: function(title, container, element, fillPage) {

    // alias variables
    var chartTitle = title;
    var valueBox = element;

    // add value-box class to container
    container.addClass('value-box');

    // value paragraph
    var value = $('<p class="value"></p>');

    // if we have shiny-text-output then just move it in
    var valueOutputSpan = [];
    var shinyOutput = valueBox.find('.shiny-valuebox-output').detach();
    if (shinyOutput.length) {
      valueBox.children().remove();
      shinyOutput.html("&mdash;");
      value.append(shinyOutput);
    } else {
      // extract the value (remove leading vector index)
      var chartValue = valueBox.text().trim();
      chartValue = chartValue.replace("[1] ", "");
      valueOutputSpan = valueBox.find('span.value-output').detach();
      valueBox.children().remove();
      value.text(chartValue);
    }

    // caption
    var caption = $('<p class="caption"></p>');
    caption.append(chartTitle);

    // build inner div for value box and add it
    var inner = $('<div class="inner"></div>');
    inner.append(value);
    inner.append(caption);
    valueBox.append(inner);

    // add icon if specified
    var icon = $('<div class="icon"><i></i></div>');
    valueBox.append(icon);
    function setIcon(chartIcon) {
      var iconLib = "";
      var iconSplit = chartIcon.split(" ");
      if (iconSplit.length > 1) {
        iconLib = iconSplit[0];
        chartIcon = iconSplit.slice(1).join(" ");
      } else {
        var components = chartIcon.split("-");
        if (components.length > 1)
          iconLib = components[0];
      }
      icon.children('i').attr('class', iconLib + ' ' + chartIcon);
    }
    var chartIcon = valueBox.attr('data-icon');
    if (chartIcon)
      setIcon(chartIcon);

    // handle data attributes in valueOutputSpan
    function handleValueOutput(valueOutput) {

      // caption
      var dataCaption = valueOutput.attr('data-caption');
      if (dataCaption)
        caption.html(dataCaption);

      // icon
      var dataIcon = valueOutput.attr('data-icon');
      if (dataIcon)
        setIcon(dataIcon);

      // If valueBox(color=) was an accent color, this attr should
      // be populated with the accent color and the relevant CSS comes
      // in through HTML dependencies
      var dataColorAccent = valueOutput.attr('data-color-accent');
      var valueBoxClasses = "value-box-" + (["primary", "info", "danger", "warning", "success"].join(" value-box-"));
      if (dataColorAccent) {
        valueBox.removeClass(valueBoxClasses);
        valueBox.addClass('value-box-' + dataColorAccent);
      }

      // If valueBox(color=) was a CSS color, these other data-color-*
      // attrs will be populated
      var dataColor = valueOutput.attr('data-color');
      if (dataColor) {
        valueBox.removeClass(valueBoxClasses);
        valueBox.css('background-color', dataColor);
      }
      var dataColorText = valueOutput.attr('data-color-text');
      if (dataColorText) {
        valueBox.find(".inner").css('color', dataColorText);
      }
      var dataColorIcon = valueOutput.attr('data-color-icon');
      if (dataColorIcon) {
        valueBox.find(".icon").css('color', dataColorIcon);
      }

      // url
      var dataHref = valueOutput.attr('data-href');
      if (dataHref) {
        valueBox.addClass('linked-value');
        valueBox.off('click.value-box');
        valueBox.on('click.value-box', function(e) {
          window.FlexDashboardUtils.showLinkedValue(dataHref);
        });
      }
    }

    // check for a valueOutputSpan
    if (valueOutputSpan.length > 0) {
      handleValueOutput(valueOutputSpan);
    }

    // if we have a shinyOutput then bind a listener to handle
    // new valueOutputSpan values
    shinyOutput.on('shiny:value',
      function(event) {
        var element = $(event.target);
        setTimeout(function() {
          var valueOutputSpan = element.find('span.value-output');
          if (valueOutputSpan.length > 0)
            handleValueOutput(valueOutputSpan);
        }, 10);
      }
    );
  }
});
</script>

<div id="dashboard-container">

<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<style type="text/css">
table {
  margin: auto;
  border-top: 1px solid #666;
  border-bottom: 1px solid #666;
}
table thead th { border-bottom: 1px solid #ddd; }
th, td { padding: 5px; }

pre {
  white-space: pre-wrap;
  word-break: keep-all;
}

/* Hack to make prompt-tab scrollable again */
div.level3.tab-pane .chart-stage {
  overflow: scroll;
}
</style>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div id="column" class="section level2" data-width="55">
<h2>Column</h2>
<div id="score-comparisons-of-14-publications" class="section level3">
<h3>Score comparisons of 14 publications</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c68b552f7e6f9baa8e2a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c68b552f7e6f9baa8e2a">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["650","662","666","671","677","681","686","690","694","705","715","1528","1569","1771"],["<a href='#650' title='Jump to individual results on the right'>van Dijk-de Vries. A, (2015)<\/a>","<a href='#662' title='Jump to individual results on the right'>Bogosian A. (2015)<\/a>","<a href='#666' title='Jump to individual results on the right'>Cutter G. (2019)<\/a>","<a href='#671' title='Jump to individual results on the right'>Freeman J. (2019)<\/a>","<a href='#677' title='Jump to individual results on the right'>Hermens H. (2008)<\/a>","<a href='#681' title='Jump to individual results on the right'>Learmonth Y. C. (2012)<\/a>","<a href='#686' title='Jump to individual results on the right'>Papeix C. (2015)<\/a>","<a href='#690' title='Jump to individual results on the right'>Solari A. (2018)<\/a>","<a href='#694' title='Jump to individual results on the right'>Vermöhlen V. (2018)<\/a>","<a href='#705' title='Jump to individual results on the right'>Petrella, R. J.  (2017)<\/a>","<a href='#715' title='Jump to individual results on the right'>Ndosi, M. (2014)<\/a>","<a href='#1528' title='Jump to individual results on the right'>Humphreys I. (2013)<\/a>","<a href='#1569' title='Jump to individual results on the right'>Straudi S. (2022)<\/a>","<a href='#1771' title='Jump to individual results on the right'>Langeskov-Christensen M. (2021)<\/a>"],[0.666666666666667,0.555555555555556,0.777777777777778,0.222222222222222,0.222222222222222,0.666666666666667,0.888888888888889,0.666666666666667,0.666666666666667,0.777777777777778,0.777777777777778,1,0.444444444444444,0.555555555555556],[0.46,0.636363636363636,0.873239436619718,0.145985401459854,0.181818181818182,0.801470588235294,0.930232558139535,0.709677419354839,0.782258064516129,0.615384615384615,0.4,1,0.615384615384615,0.6],[0.666666666666667,0.555555555555556,0.666666666666667,0.111111111111111,0.222222222222222,0.444444444444444,0.666666666666667,0.666666666666667,0.555555555555556,0.666666666666667,0.777777777777778,0.888888888888889,0.444444444444444,0.555555555555556],[0.367768595041322,0.35,0.696629213483146,0.1,0.224137931034483,0.684713375796178,0.754545454545455,0.618374558303887,0.706976744186047,0.756756756756757,0.661654135338346,0.958904109589041,0.592592592592593,0.454545454545455]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th>Ref.<\/th>\n      <th>Author & Year<\/th>\n      <th>pooled agreement<\/th>\n      <th>pooled weighted κ<\/th>\n      <th>agreement<\/th>\n      <th>weighted κ<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"bPaginate":false,"dom":"t","order":[[0,"asc"]],"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatPercentage(data, 0, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[2,3,4,5]}],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render"],"jsHooks":[]}</script>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
<div id="score-heatmaps-pooled-unpooled" class="section level3"
data-height="720">
<h3>Score heatmaps
(<a onclick="$('p.image-container')[0].style = 'background: url(&quot;../precis2/gpt4_precis2/results/reliability_9_items.png&quot;) center center / contain no-repeat;'; $('p.image-container img')[0].src = &quot;../precis2/gpt4_precis2/results/reliability_9_items.png&quot;;" style="cursor: pointer">pooled</a>
/
<a onclick="$('p.image-container')[0].style = 'background: url(&quot;../precis2/gpt4_precis2/results/reliability_unpooled_9_items.png&quot;) center center / contain no-repeat;'; $('p.image-container img')[0].src = &quot;../precis2/gpt4_precis2/results/reliability_unpooled_9_items.png&quot;;" style="cursor: pointer">unpooled</a>)</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<p><img data-figure-id="fig1" src="../precis2/gpt4_precis2/results/reliability_9_items.png" width="1536" onclick="window.open(this.src)" style="cursor: pointer"></p>
</div>
</div>
<div id="column-1" class="section level2 tabset" data-width="45">
<h2 class="tabset">Column</h2>
<div id="individual-results" class="section level3">
<h3>Individual results</h3>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<p><a name='650'></a></p>
<div
id="van-dijk-de-vries.-a-2015-lessons-learnt-from-a-cluster-randomised-trial-evaluating-the-effectiveness-of-self-management-support-sms-delivered-by-practice-nurses-in-routine-diabetes-care"
class="section level4">
<h4>650.
<a href='https://doi.org/10.1136/bmjopen-2014-007014' title='Open publication'>van
Dijk-de Vries. A, (2015): <i>Lessons learnt from a cluster-randomised
trial evaluating the effectiveness of Self-Management Support (SMS)
delivered by practice nurses in routine diabetes care</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
</tr>
</tbody>
</table>
<p><br><a name='662'></a></p>
</div>
<div
id="bogosian-a.-2015-distress-improves-after-mindfulness-training-for-progressive-ms-a-pilot-randomised-trial"
class="section level4">
<h4>662.
<a href='https://doi.org/10.1177/1352458515576261' title='Open publication'>Bogosian
A. (2015): <i>Distress improves after mindfulness training for
progressive MS: A pilot randomised trial</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p><br><a name='666'></a></p>
</div>
<div
id="cutter-g.-2019-higher-satisfaction-and-adherence-with-glatiramer-acetate-40-mgml-tiw-vs-20-mgml-qd-in-rrms"
class="section level4">
<h4>666.
<a href='https://doi.org/10.1016/j.msard.2019.04.036' title='Open publication'>Cutter
G. (2019): <i>Higher satisfaction and adherence with glatiramer acetate
40 mg/mL TIW vs 20 mg/mL QD in RRMS</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='671'></a></p>
</div>
<div
id="freeman-j.-2019-assessment-of-a-home-based-standing-frame-programme-in-people-with-progressive-multiple-sclerosis-sums-a-pragmatic-multi-centre-randomised-controlled-trial-and-cost-effectiveness-analysis"
class="section level4">
<h4>671.
<a href='https://doi.org/10.1016/S1474-4422(19)30190-5' title='Open publication'>Freeman
J. (2019): <i>Assessment of a home-based standing frame programme in
people with progressive multiple sclerosis (SUMS): a pragmatic,
multi-centre, randomised, controlled trial and cost-effectiveness
analysis</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='677'></a></p>
</div>
<div
id="hermens-h.-2008-clinical-assessment-of-the-hellodoc-tele-rehabilitation-service"
class="section level4">
<h4>677. <a href='https://doi.org/' title='Open publication'>Hermens H.
(2008): <i>Clinical assessment of the HELLODOC tele-rehabilitation
service</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='681'></a></p>
</div>
<div
id="learmonth-y.-c.-2012-the-effects-of-a-12-week-leisure-centre-based-group-exercise-intervention-for-people-moderately-affected-with-multiple-sclerosis-a-randomized-controlled-pilot-study"
class="section level4">
<h4>681.
<a href='https://doi.org/10.1177/0269215511423946' title='Open publication'>Learmonth
Y. C. (2012): <i>The effects of a 12-week leisure centre-based, group
exercise intervention for people moderately affected with multiple
sclerosis: a randomized controlled pilot study</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='686'></a></p>
</div>
<div
id="papeix-c.-2015-evaluation-of-an-integrated-multidisciplinary-approach-in-multiple-sclerosis-care-a-prospective-randomized-controlled-study"
class="section level4">
<h4>686.
<a href='https://doi.org/10.1177/2055217315608864' title='Open publication'>Papeix
C. (2015): <i>Evaluation of an integrated multidisciplinary approach in
multiple sclerosis care: A prospective, randomized, controlled
study</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='690'></a></p>
</div>
<div
id="solari-a.-2018-randomized-controlled-trial-of-a-home-based-palliative-approach-for-people-with-severe-multiple-sclerosis"
class="section level4">
<h4>690.
<a href='https://doi.org/10.1177/1352458517704078' title='Open publication'>Solari
A. (2018): <i>Randomized controlled trial of a home-based palliative
approach for people with severe multiple sclerosis</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='694'></a></p>
</div>
<div
id="vermöhlen-v.-2018-hippotherapy-for-patients-with-multiple-sclerosis-a-multicenter-randomized-controlled-trial-ms-hippo"
class="section level4">
<h4>694.
<a href='https://doi.org/10.1177/1352458517721354' title='Open publication'>Vermöhlen
V. (2018): <i>Hippotherapy for patients with multiple sclerosis: A
multicenter randomized controlled trial (MS-HIPPO)</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
</tr>
</tbody>
</table>
<p><br><a name='705'></a></p>
</div>
<div
id="petrella-r.-j.-2017-hockey-fans-in-training-a-pilot-pragmatic-randomized-controlled-trial"
class="section level4">
<h4>705.
<a href='https://doi.org/10.1249/MSS.0000000000001380' title='Open publication'>Petrella,
R. J. (2017): <i>Hockey Fans in Training: A Pilot Pragmatic Randomized
Controlled Trial</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='715'></a></p>
</div>
<div
id="ndosi-m.-2014-the-outcome-and-cost-effectiveness-of-nurse-led-care-in-people-with-rheumatoid-arthritis-a-multicentre-randomised-controlled-trial"
class="section level4">
<h4>715.
<a href='https://doi.org/10.1136/annrheumdis-2013-203403' title='Open publication'>Ndosi,
M. (2014): <i>The outcome and cost-effectiveness of nurse-led care in
people with rheumatoid arthritis: a multicentre randomised controlled
trial</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='1528'></a></p>
</div>
<div
id="humphreys-i.-2013-cost-effectiveness-of-an-adjustment-group-for-people-with-multiple-sclerosis-and-low-mood-a-randomized-trial"
class="section level4">
<h4>1528.
<a href='https://doi.org/10.1177/0269215513488608' title='Open publication'>Humphreys
I. (2013): <i>Cost-effectiveness of an adjustment group for people with
multiple sclerosis and low mood: a randomized trial</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='1569'></a></p>
</div>
<div
id="straudi-s.-2022-combining-a-supervised-and-home-based-task-oriented-circuit-training-improves-walking-endurance-in-patients-with-multiple-sclerosis.-the-ms_toct-randomized-controlled-trial"
class="section level4">
<h4>1569.
<a href='https://doi.org/10.1016/j.msard.2022.103721' title='Open publication'>Straudi
S. (2022): <i>Combining a supervised and home-based task-oriented
circuit training improves walking endurance in patients with multiple
sclerosis. The MS_TOCT randomized-controlled trial</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br><a name='1771'></a></p>
</div>
<div
id="langeskov-christensen-m.-2021-efficacy-of-high-intensity-aerobic-exercise-on-cognitive-performance-in-people-with-multiple-sclerosis-a-randomized-controlled-trial"
class="section level4">
<h4>1771.
<a href='https://doi.org/10.1177/1352458520973619' title='Open publication'>Langeskov-Christensen
M. (2021): <i>Efficacy of high-intensity aerobic exercise on cognitive
performance in people with multiple sclerosis: A randomized controlled
trial</i></a></h4>
<table style="margin: 0; width: 100%">
<caption>
PRECIS-2
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Eligibility">
D1</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Recruitment">
D2</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Setting"> D3</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Organization">
D4</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (delivery)"> D5</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black"
title="Flexibility (adherence)"> D6</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Follow-up">
D7</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary outcome">
D8</span>
</th>
<th style="text-align:left;">
<span style="border-bottom: 1px dashed black" title="Primary analysis">
D9</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LLM (GPT-4, 2nd run)
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
LLM (GPT-4)
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p><br></p>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
<div class="knitr-options" data-fig-width="576" data-fig-height="460">

</div>
</div>
</div>
<div id="llm-prompt" class="section level3">
<h3>LLM prompt</h3>
<ul>
<li>Model: <a
href="https://platform.openai.com/docs/models/gpt-4">gpt-4-32k-0613</a></li>
<li>Temperature: <code>0</code></li>
<li>Briefing derived from: <a
href="https://doi.org/10.1016/j.jclinepi.2017.06.001">Loudon 2015,
section ‘The domains in detail’ w/o boxes</a> &amp; <a
href="http://precis-2.org/Help/Documentation/ToolkitDownload">PRECIS-2
Toolkit page 4</a></li>
</ul>
<div id="system-prompt" class="section level4">
<h4>System prompt</h4>
<pre>
You are an expert in clinical trial design and are tasked to assess the PRECIS-2 scores of a trial based on the full text of its publication. You have the briefing in the attached "Loudon 2015 shortened.txt" and "PRECIS Toolkit page 4.txt"

&lt;Loudon 2015 shortened.txt&gt;
# The nine domains of PRECIS-2

## 1. Eligibility criteria: Who is selected to participate in the trial?

A highly pragmatic approach to eligibility criteria would be to include in the trial anyone with the condition of interest who is likely to be a candidate for the intervention if it was being provided in usual care for this condition. So, if in usual care the intervention would likely be used for children, elderly people, people with a range of comorbidities, and people with a probable diagnosis rather than, say, a laboratory confirmed diagnosis, then all of these groups should be in the trial too. If people aged over 80 or with multiple morbidities would not receive the intervention in usual care because we already know that this intervention does more harm than good in elderly or multi-morbid patients, then a pragmatic design choice would be to exclude them from the trial. A trial with eligibility design choices like this would score at or close to 5 on the PRECIS-2 scale.

As the level of similarity between the people in the trial and those in usual care decreases, then so would the PRECIS-2 score. Many things could reduce the score, but some examples include

* Excluding people not known or shown to be highly adherent to the intervention.
* Excluding people using tests or measures that are not used or available in usual care.
* Excluding people not expected to be highly responsive to the intervention.
* Excluding people who would be likely to receive the intervention in usual care but inclusion in the trial is considered too difficult because of challenges unrelated to the delivery of the intervention. Children, people over the age of 65, and pregnant women are good examples of people commonly excluded because of anticipated difficulties of gaining ethical approval rather than whether they would be likely to receive an intervention in usual care.
* Excluding people whose adherence and follow-up may pose difficulties, whether because of social disadvantage, personal circumstances, or illness (such as homelessness, substance misuse, mental health problems, or poor motivation).
* Excluding people dependent on help for activities of daily living, unless they would usually not be eligible for intervention.

Finally, exclusion criteria for known safety issues would not generally reduce the PRECIS-2 score since such individuals would not be expected to get the intervention in usual care.

## 2. Recruitment: How are participants recruited into the trial?

This domain has been included to encourage trialists to consider how and where they will recruit people to their trial.

The most extreme pragmatic approach to recruitment would be to do this in usual care so that only the people who attend a clinic with the condition of interest are recruited after they present on their own behalf without any overt recruitment effort. A highly pragmatic approach to trial design would also recruit from more than one clinic as an explicit way of increasing applicability of the trial results. Recruiting through usual appointments at a diverse range of clinics is likely to score at or close to 5 on the PRECIS-2 scale.

If the above is not feasible, at least as the sole recruitment route, trialists will need to add other recruitment strategies. If extra resources will be required to recruit people to the trial, trialists need to consider if this affects applicability, especially if participants are recruited from settings other than the one in which the results are likely to be applied. For example, recruiting in secondary care for an intervention that will mainly be used in primary care will ensure that the recruited patients are different in severity and treatment than the patients with this same condition in primary care; and so this will make the trial more explanatory and reduce the PRECIS 2 score. Additional recruitment approaches that could potentially reduce the PRECIS-2 score include

* Searching medical record systems for eligible participants and then mailing invitation letters. Depending on local resources, such as electronic medical records and comprehensive local disease registers, this approach may be easily achievable in usual care and so would not reduce the PRECIS-2 score.
* Media advertising campaigns such as television and radio advertisements, newspaper advertisements, flyers, websites, press releases, letters to the editor, interviews with the chief investigator on television or radio. The issue to consider here is whether these campaigns are being used simply to speed up recruitment, or because they are the only way to reach a dispersed population. In the latter case, if such campaigns would not be available in usual care then this trial recruitment route is more explanatory.
* Incentives such as cash payment, vouchers, travel costs, or childcare. Some of these incentives may be better considered as part of the intervention (for example, a lifestyle change intervention aimed at new mothers may only be effective because childcare was also provided and women could therefore attend sessions).

## 3. Setting: Where is the trial being done?

This domain has been included to encourage trialists to explicitly consider the match between the setting of their trial and the setting where their results are likely to be applied. While there are no accepted guidelines for how to assess the impact of setting on applicability, there are several characteristics of the setting that will almost always need to be considered, including geography, healthcare system, country, and the socioeconomic and ethnic mix of the population. All of these might affect the applicability of results from a particular trial.

The most extremely pragmatic approach to setting would be to do the trial in an identical setting to which you intend the results to be applied. Such a trial is likely to score at or close to 5 on PRECIS-2.

Even settings that seem rather restrictive could still be a highly pragmatic design choice if this setting is the usual care setting where patients are treated for the particular health condition. For example, if a trial was carried out in the most specialist intensive care units in the country and the intention of the trial was to support decision making in these highly specialised units, then the design choice with regard to setting is still pragmatic. Conversely, if the trial results were intended to be useful for all intensive care units, but the trial included only highly specialised units, then the trial is now taking a more explanatory approach to the choice of setting that goes against the intention of the trial.

Approaches to setting that are likely to reduce the PRECIS-2 score include

* Selecting participating centres from among only specialist or academic centres when the trial is intended to be applicable to all types of practice or clinic treating the condition of interest.
* Running the trial in a single centre. It is rare that a trial is done with the intention that its results should apply to only that single centre. Including several centres makes it easier to claim that the trial setting matches that to which the results will be applied.

## 4. Organisation: What expertise and resources are needed to deliver the intervention?

This domain has been included to encourage trialists to consider the match between how care is organised and delivered in the trial and how the intervention would be made available to patients in usual care. As there have been acknowledged difficulties in implementing results post-trial (even in settings where the trial was conducted), we wanted trialists to consider organising the delivery of their trial intervention with an awareness of how easy it would be to implement the intervention post-trial .

A highly pragmatic design would aim to slot the intervention into the usual organisation of care for the condition of interest, making use of no more than the existing healthcare staff and resources in that setting. A design like this is likely to score at or close to 5 on PRECIS-2.

Sometimes a change to how care is organised is itself the intervention being evaluated, and the difference between the trial and usual care is clear. In this case the organisation domain would be explanatory compared with current usual care, but trialists can note that the difference is an explicit feature of the intervention.

The PRECIS-2 organisation score will be reduced to the degree trialists make changes in how care is delivered compared with the usual recipients and care delivery. For example, the trial team may, in the intervention arm, provide additional training to staff or provide additional staff so that the intervention can be delivered. Patients who would normally be seen in primary care may be seen by specialists in secondary care instead, or they may receive additional expensive diagnostic procedures unavailable in usual care. The success or otherwise of the trial then depends on resources unavailable in usual care, reducing applicability. If these additional resources are essential to the effectiveness of the intervention they should be considered to be part of the intervention and be specified in the part of the protocol describing the intervention. In that case these resources should not be counted when this element of the trial is judged.

Organisational approaches that are likely to reduce the PRECIS-2 score include the following (but only when they are not incorporated and described as necessary elements of the intervention):

* Increasing the number of healthcare or other professionals available to deliver the intervention over and above the levels available in usual care.
* Providing significant levels of additional training to increase the expertise of healthcare professionals.
* Requiring healthcare professionals to have some minimum level of experience, defined by length of time, in working with the intervention that is greater than would be the case in usual care.
* Requiring healthcare professionals to have a specialty certification that would not be considered essential to deliver the intervention in usual care.
* Increasing the resources (such as facilities, diagnostic equipment, consumables) available to deliver the intervention, measure outcomes, or do follow-up over and above what would be available in usual care.

## 5. Flexibility (delivery): How should the intervention be delivered?

In PRECIS-2, trialists wishing to conduct more pragmatic trials are encouraged to think about how the intervention will be implemented post-trial in the setting where the results are expected to be applied. The most pragmatic design approach to delivery flexibility would leave the details of how to implement the intervention up to providers, in other words, what happens in usual care. Thus, the methodology of how to deliver an intervention is not rigidly prescriptive in the protocol. For example, the details of how to perform a surgical procedure could be left entirely to the surgeon, or how to deliver an educational programme is left to the discretion of the educator. Additionally, a pragmatic approach would not dictate which other interventions were permitted, or how to deliver them, which again is the situation in usual practice. This sort of delivery flexibility would score at or close to 5 on PRECIS-2. Flexibility (delivery) applies to all intervention arms and the comparator (control) arm if usual care is not the comparator, and if necessary each of these arms will need to be scored separately. If usual care is the intended comparator but any elements relating to delivery are changed it ceases to be usual care and needs to be scored.

As delivery flexibility is reduced, the trial moves towards a more explanatory approach in this domain. Approaches to delivery flexibility that are likely to reduce the PRECIS-2 score include

* A highly specified, protocol driven intervention. For example, specific direction is given for how to the administer the intervention (such as dose, dosing schedule, surgical procedures, educational material, and delivery)
* Having measures in place to monitor the compliance of those delivering the intervention (such as doctors) with the protocol and measures (up to and including exclusion) to address poor compliance.
* The timing of intervention delivery is tightly defined and designed to maximise the intervention effect.
* Providers undertake additional interventions that would not occur in usual care
* Restrictions are placed on the number and types of co-interventions, particularly if excluded co-interventions would dilute any intervention effect
* There is specific direction for applying permitted co-interventions
* There are specific directions for managing complications or side effects of the intervention.

## 6. Flexibility (adherence): What measures are in place to ensure participants adhere to the intervention?

It is important that trialists focused on applicability consider how probable it is that there will be uptake of the intervention being tested and how recipients will engage with it in the setting in which it will be later applied. A highly pragmatic design approach would allow for full flexibility in how end user recipients engage with the intervention. In usual care, health professionals encourage patients to take medication or follow therapy as best they can, and such encouragement would not count against a pragmatic design; if it also happens in usual care, allowing it in the trial is a pragmatic design decision. A trial with no special measures to enforce engagement or compliance would score at or close to 5 on PRECIS-2. On the other hand, a trial protocol that lays out methods to monitor and ensure patient compliance would score at or close to 1 on PRECIS-2. Flexibility (adherence) applies to all intervention arms and the comparator (control) arm if usual care if not the comparator, and if necessary each of these arms will need to be scored separately. If usual care is the intended comparator but any elements relating to adherence are changed it ceases to be usual care and needs to be scored.

It is possible that improving recipients’ ability to take medication or follow therapy is the intervention under evaluation, a situation similar to that already described for the Setting and Organisation domains. In this case, the Flexibility (adherence) domain would be explanatory compared with current usual care, but trialists can note that the difference is an explicit feature of the intervention.

As flexibility for recipients is reduced, the trial moves towards a more explanatory approach on this domain. Approaches to recipient flexibility that are likely to reduce the PRECIS-2 score include

* Having a trial pre-screening stage where patients are evaluated for adherence with the intervention (such as dose, dosing schedule, attendance at therapy sessions). Patients judged to not be adherent are excluded.
* Withdrawing patients from the trial if their adherence with the intervention drops below some specified level. For example, a trial might withdraw patients if they failed to attend two consecutive sessions of cognitive behavioural therapy or failed to take more than 90% of their medication.
* Having measures in place to monitor patient adherence with the protocol and measures (up to and including withdrawal) to address poor adherence. Measures to increase patient adherence should this fall below some specified level could, for example, include scheduling an extra discussion with a research nurse about why following the trial instructions is important.

## 7. Follow-up: How closely are participants followed up?

This domain encourages trialists to think about follow-up with regard to the setting where the results will be applied. The most pragmatic position with regard to follow-up would be to have no more follow-up of recipients than would be the case in usual care. Indeed, the most extreme position is to have no follow-up contact at all with recipients and to obtain outcome data by other means (such as electronic medical records or other usual data to measure mortality or hospital admissions). Trials that have no more follow-up than is normal in usual care and have minimal additional data collection (or use data obtained from administrative or clinical record systems without direct contact with the participant) would be likely to score at or close to 5 on PRECIS-2.

As follow-up becomes more intense, the trial becomes more explanatory and the PRECIS-2 score will decrease. Follow-up approaches that are likely to reduce the PRECIS-2 score include

* Follow-up visits that are more frequent than would typically occur under usual care.
* Unscheduled follow-up visits are triggered by a primary outcome event.
* Unscheduled follow-up visits are triggered by an intervening event that is likely to lead to the primary outcome event.
* Patients are contacted if they fail to keep trial appointments. This would not reduce the PRECIS-2 score if this was also done in usual care.
* More extensive data are collected, particularly intervention related data, than would be typical outside the trial
* Visits are longer than usual care and involve additional or different staff.

Often the required trial outcomes may be obtained only through contact with the recipients. Even in the “no follow-up” approach, assessment of outcomes may be achieved with a single follow-up at the end of the study. The end of study would need to be defined so that there is sufficient time for the desired study outcomes (see Primary outcome domain below) to be observed. When the follow-up is done in this way, it is unlikely to have an impact on engagement or response to the treatment, and so such a follow-up approach would be viewed as pragmatic and rated at or close to 5.

It is often the case that explanatory trials are interested in the effect of an intervention only during a brief intervention period or shortly after. On the other hand, trials taking a pragmatic approach to design may follow recipients well beyond the intervention period. This longer period of follow-up may require more contacts than would be the case in usual care, but this need not be inconsistent with a pragmatic approach if it does not result in care management that differs from the usual conditions. It is, however, important to consider the burden of follow-up for participants.

## 8. Primary outcome: How relevant is it to participants?

The choice of primary outcome is a crucial trial design decision, and a pragmatic approach would be to select an outcome that is of obvious importance from the patient’s perspective. Post-trial, an outcome selected using a pragmatic approach would also be relevant to commissioners of care, the people who decide whether to implement the intervention on the basis of its results. For example, an intervention that aims to reduce falls in elderly people living independently in the community should have as its primary outcome the number of falls in the elderly living independently in the community. This outcome has meaning to patients, their relatives and friends, healthcare professionals, and policymakers. Measures of, say, bone density, muscle strength, or functional ability are distant from the key question of whether the intervention prevents elderly people falling in their own homes. Trials that choose outcomes of obvious importance to patients, and measure them in a way that is the same or similar to the way they are measured in usual care would be likely to score at or close to 5 on PRECIS-2.

As the primary outcome becomes less recognisably important to patients, or is assessed on criteria seldom used in usual care, the trial becomes more explanatory and the PRECIS-2 score will decrease. Approaches to the primary outcomes that are likely to reduce the PRECIS-2 score include

* Choosing a surrogate outcome (such as blood test) that the intervention is expected to have a direct effect on, or the use of safety climate surveys rather than medical error events or near miss events.
* Using a composite primary outcome in which some of the elements are less important to patients or participants than others (such as incidence of death, stroke, myocardial infarction, or renal dysfunction at 30 days).
* Having central adjudication of the outcome or using an assessment that needs special training or tests not normally used in usual care.
* Choosing an outcome that is important but mainly to providers, typically because it is a physiological outcome considered useful in treatment planning and monitoring.
* Measuring an outcome that is important but at a time that is earlier than would be normal in usual care. For example, stroke could be a primary outcome in trials making explanatory or pragmatic design choices. However, time horizons may vary from short term after a one-time intervention (more explanatory) to long term (more pragmatic).

## 9. Primary analysis: To what extent are all data included?

Most trials are a superiority design so the most pragmatic approach with regard to the analysis would be to make no special allowance in the analysis for non-adherence, practice variability, etc. In other words, the pragmatic approach to the analysis would typically be an intention-to-treat analysis using all available data. This sort of analysis would score at or close to 5 on PRECIS-2. (Non-inferiority and equivalence trials are usually contrary to intention-to-treat analysis.)

The intention-to-treat analysis has recently also become the norm for superiority trials taking a more explanatory design approach, especially when regulatory approval for an intervention is being sought. The most explanatory approach would be to use the “as treated analysis” as the primary analysis, in which only those patients who actually received (or did not receive) the intervention would be analysed in the intervention and control groups respectively, irrespective of their initial randomised group allocation.

Other causes of missing data may be important but may not affect how pragmatic or explanatory a trial is. Systematic exclusion of data from participants because, say, they were poorly adherent would make a trial more explanatory. Using all data but doing nothing to try and fill gaps caused by missing data would not in itself make trial more pragmatic or explanatory; missing data, especially if there is a lot of it, makes any conclusions more uncertain regardless of the design approach taken.

Approaches to the primary analysis that are likely to reduce the PRECIS-2 score include

* Excluding non-compliant recipients (per protocol analysis)
* Analyse recipients to treatment received instead of treatment randomised (as treated analysis)
* Excluding data from non-adherent providers
* Excluding data from trial sites or providers who recruit below expected volume.

For some trials taking an explanatory approach (dose finding trials are an example), it may be appropriate to have primary analysis restricted in the ways mentioned; otherwise such restricted analyses of the primary outcome could be pre-planned as secondary analyses of the primary outcome.
&lt;/Loudon 2015 shortened.txt&gt;
&lt;PRECIS Toolkit page 4.txt&gt;
# PRECIS-2 Domains
* Eligibility: To what extent are the participants in the trial similar to those who would receive this intervention if it was part of usual care? For example, score 5 for very pragmatic criteria essentially identical to those in usual care; score 1 for a very explanatory approach with lots of exclusions (e.g. those who don’t comply, respond to treatment, or are not at high risk for primary outcome, are children or elderly), or uses many selection tests not used in usual care.
* Recruitment: How much extra effort is made to recruit participants over and above what that would be used in the usual care setting to engage with patients? For example, score 5 for very pragmatic recruitment through usual appointments or clinic; score 1 for a very explanatory approach with targeted invitation letters, advertising in newspapers, radio plus incentives and other routes that would not be used in usual care.
* Setting: How different is the setting of the trial and the usual care setting? For example, score 5 for a very pragmatic choice using identical settings to usual care; score 1, for a very explanatory approach with only a single centre, or only specialised trial or academic centres.
* Organisation: How different are the resources, provider expertise and the organisation of care delivery in the intervention arm of the trial and those available in usual care? For example, score 5 for a very pragmatic choice that uses identical organisation to usual care; score 1 for a very explanatory approach if the trial increases staff levels, gives additional training, require more than usual experience or certification and increase resources.
* Flexibility (delivery): How different is the flexibility in how the intervention is delivered and the flexibility likely in usual care? For example, score 5 for a very pragmatic choice with identical flexibility to usual care; score 1 for a very explanatory approach if there is a strict protocol, monitoring and measures to improve compliance, with specific advice on allowed co-interventions and complications.
* Flexibility (adherence): How different is the flexibility in how participants must adhere to the intervention and the flexibility likely in usual care? For example, score 5 for a very pragmatic choice involving no more than usual encouragement to adhere to the intervention; score 1 for a very explanatory approach that involves exclusion based on adherence, and measures to improve adherence if found wanting. In some trials eg surgical trials where patients are being operated on or Intensive Care Unit trials where patients are being given IV drug therapy, this domain is not applicable as there is no compliance issue after consent has been given, so this score should be left blank.
* Follow-up: How different is the intensity of measurement and follow-up of participants in the trial and the likely follow-up in usual care? For example, score 5 for a very pragmatic approach with no more than usual follow up; score 1 for a very explanatory approach with more frequent, longer visits, unscheduled visits triggered by primary outcome event or intervening event, and more extensive data collection.
* Primary outcome: To what extent is the trial's primary outcome relevant to participants? For example, score 5 for a very pragmatic choice where the outcome is of obvious importance to participants; score 1 for a very explanatory approach using a surrogate, physiological outcome, central adjudication or use assessment expertise that is not available in usual care, or the outcome is measured at an earlier time than in usual care.
* Primary analysis: To what extent are all data included in the analysis of the primary outcome? For example, score 5 for a very pragmatic approach using intention to treat with all available data; score 1 for a very explanatory analysis that excludes ineligible post-randomisation participants, includes only completers or those following the treatment protocol.
&lt;/PRECIS Toolkit page 4.txt&gt;
 
</pre>
</div>
<div id="user-prompt" class="section level4">
<h4>User prompt</h4>
<pre>
This is the full text to be assessed:
&lt;FULLTEXT&gt;
%FULLTEXT%
&lt;/FULLTEXT&gt;

For each of the 9 domains of PRECIS-2, perform the following steps:

1. Extract 1-3 relevant quotes from the full text.

2. Explain your reasoning in 1 paragraph.

3. Give a score X from 1 (very explanatory) to 5 (very pragmatic) in square brackets like this: "Score: [X]". If the full text does not contain enough information to assess a specific domain, report "Score: [NA]".

Do not provide a final summary paragraph in the end.
 
</pre>
</div>
</div>
</div>

</div>

<script>
$(document).ready(function() {
  // add bootstrap table styles to pandoc tables
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed table-sm');

  // initialize mathjax

});
</script>

<script type="text/javascript">
$(document).ready(function () {
  FlexDashboard.init({
    fillPage: true,
    orientation: "columns",
    storyboard: false,
    defaultFigWidth: 576,
    defaultFigHeight: 460,
    defaultFigWidthMobile: 360,
    defaultFigHeightMobile: 460,
    resize_reload: true
  });
  var navbar = $(".navbar").first();
  var body = $("body").first();
  var sidebar = $(".section.sidebar").first();
  function addNavbarPadding() {
    var navHeight = navbar.outerHeight();
    body.css("padding-top", (navHeight + 8) + "px");
    sidebar.css("top", navHeight + "px");
    var resizeEvent = window.document.createEvent("UIEvents");
    resizeEvent.initUIEvent("resize", true, false, window, 0);
    window.dispatchEvent(resizeEvent);
  }
  if (!window.Shiny) setTimeout(addNavbarPadding, 100);
  $(document).on("shiny:idle", function() {
    setTimeout(addNavbarPadding, 50);
  });
});
</script>

</body>
</html>
